<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فرم درخواست خرید</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div class="container">
        <header>
            <h1>فرم درخواست خرید</h1>
            <p class="subtitle">لطفاً موارد زیر را با دقت تکمیل کنید.</p>
        </header>

        <!-- اطلاعات کلی فاکتور -->
        <div class="form-group">
            <div class="form-row">
                <label for="projectCode">کد پروژه:</label>
                <input type="text" id="projectCode" placeholder="مثال: P-1404-08">
            </div>
            <div class="form-row">
                <label>تاریخ ثبت:</label>
                <!-- این قسمت به صورت خودکار توسط جاوااسکریپت پر می‌شود -->
                <span id="currentDate" class="date-display"></span>
            </div>
        </div>

        <!-- جدول اقلام خرید -->
        <div class="table-container">
            <table id="purchaseTable">
                <thead>
                    <tr>
                        <th>عنوان کالا</th>
                        <th>تعداد</th>
                        <th>قیمت واحد</th>
                        <th>قیمت کل</th>
                        <th>حذف</th>
                    </tr>
                </thead>
                <tbody id="purchaseTableBody">
                    <!-- سطرها به صورت پویا با جاوااسکریپت اضافه می‌شوند -->
                </tbody>
            </table>
        </div>

        <button id="addItemBtn" class="btn-add-item">افزودن قلم جدید +</button>

        <!-- بخش سوال در مورد فاکتور -->
        <div class="invoice-section">
            <label class="invoice-question">آیا فاکتور رسمی دارد؟</label>
            <div class="radio-group">
                <input type="radio" id="invoiceYes" name="hasInvoice" value="yes">
                <label for="invoiceYes">بله</label>
                <input type="radio" id="invoiceNo" name="hasInvoice" value="no" checked>
                <label for="invoiceNo">خیر</label>
            </div>
        </div>
        
        <!-- بخش بارگذاری فایل (در ابتدا مخفی است) -->
        <div id="fileUploadWrapper" class="file-upload-wrapper hidden">
            <label for="invoiceFile">فایل فاکتور را انتخاب کنید:</label>
            <input type="file" id="invoiceFile">
        </div>

        <!-- جمع کل فاکتور -->
        <div class="summary">
            <h2>جمع کل فاکتور: <span id="grandTotal">۰</span> ریال</h2>
        </div>

        <!-- دکمه‌های عملیاتی -->
        <div class="actions">
            <button id="submitBtn" class="btn-primary">ثبت درخواست</button>
            <button id="closeBtn" class="btn-secondary">انصراف و بستن</button>
        </div>

    </div>

    <!-- 
        *** نکته کلیدی اصلاحیه ***
        اسکریپت‌ها به انتهای بادی منتقل شدند تا تضمین شود بعد از بارگذاری کامل HTML اجرا می‌شوند.
        این کار هر دو مشکل تاریخ و دکمه افزودن را حل می‌کند.
    -->
    <script src="https://eitaa.com/eitaa-js-sdk.js"></script>
    <script src="app.js"></script>

</body>
</html>
